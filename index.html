<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>allbrands</title>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&display=swap');

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: 'Montserrat', sans-serif;
        background: #f8f8f8;
        color: #333;
      }

      header {
        background: #000;
        color: #fff;
        padding: 1rem 2rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .logo {
        font-size: 1.8rem;
        font-weight: 800;
        text-transform: lowercase;
      }

      .logo span:first-child {
        color: #fff;
      }

      .logo span:last-child {
        color: #ff3c78;
      }

      .hero {
        text-align: center;
        padding: 4rem 2rem;
        background: url('https://images.unsplash.com/photo-1602810318123-3f8b2c6f39e1?auto=format&fit=crop&w=1470&q=80') no-repeat center center/cover;
        color: white;
      }

      .hero h1 {
        font-size: 3rem;
        margin-bottom: 1rem;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
      }

      .hero p {
        font-size: 1.2rem;
        max-width: 600px;
        margin: 0 auto;
        text-shadow: 0 1px 3px rgba(0, 0, 0, 0.4);
      }

      .search-sort-filter {
        display: flex;
        flex-wrap: wrap;
        gap: 1rem;
        justify-content: center;
        padding: 2rem;
      }

      .search-sort-filter input,
      .search-sort-filter select {
        padding: 0.8rem 1rem;
        border: 1px solid #ccc;
        border-radius: 8px;
        font-size: 1rem;
        flex: 1;
        min-width: 220px;
      }

      .products {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 2rem;
        padding: 2rem;
      }

      .product-card {
        background: #fff;
        border-radius: 16px;
        overflow: hidden;
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        cursor: pointer;
      }

      .product-card:hover {
        transform: translateY(-6px);
        box-shadow: 0 6px 24px rgba(0, 0, 0, 0.2);
      }

      .product-card img {
        width: 100%;
        height: 300px;
        object-fit: cover;
      }

      .product-details {
        padding: 1rem;
        text-align: center;
      }

      .product-details h2 {
        font-size: 1.1rem;
        margin-bottom: 0.5rem;
      }

      .product-details p {
        font-weight: 600;
        color: #ff3c78;
      }

      footer {
        background: #000;
        color: #fff;
        text-align: center;
        padding: 2rem 1rem;
        margin-top: 4rem;
      }

      footer p {
        font-size: 0.9rem;
      }
    </style>
  </head>
  <body>
    <header>
      <div class="logo">
        <span>all</span><span>brands</span>
      </div>
    </header>

    <section class="hero">
      <h1>All your favourite fits in one place</h1>
      <p>Discover the latest fashion from your go-to brands, all in one sleek, simple space.</p>
    </section>

    <div class="search-sort-filter">
      <input type="text" id="search" placeholder="Search products..." />
      <select id="categoryFilter">
        <option value="">All Categories</option>
      </select>
      <select id="brandFilter">
        <option value="">All Brands</option>
      </select>
      <select id="sort">
        <option value="default">Sort by</option>
        <option value="asc">Price: Low to High</option>
        <option value="desc">Price: High to Low</option>
      </select>
    </div>

    <main class="products" id="productGrid">
      <!-- Dynamic product cards will be inserted here -->
    </main>

    <footer>
      <p>&copy; 2025 allbrands. Curated fashion, simplified.</p>
    </footer>

    <script>
      async function fetchProducts() {
        const res = await fetch('/.netlify/functions/products');
        const data = await res.json();
        return data;
      }

      function renderProducts(products) {
        const grid = document.getElementById('productGrid');
        grid.innerHTML = '';

        products.forEach(product => {
          const card = document.createElement('div');
          card.className = 'product-card';
          card.innerHTML = `
            <a href="${product['Product Page']}" target="_blank" rel="noopener noreferrer">
              <img src="${product['Image URL']}" alt="${product['Product Name']}" />
              <div class="product-details">
                <h2>${product['Product Name']}</h2>
                <p>Rs ${product['Price']}</p>
              </div>
            </a>
          `;
          grid.appendChild(card);
        });
      }

      function setupFilters(products) {
        const categorySelect = document.getElementById('categoryFilter');
        const brandSelect = document.getElementById('brandFilter');
        const sortSelect = document.getElementById('sort');
        const searchInput = document.getElementById('search');

        const categories = [...new Set(products.map(p => p.Category))];
        const brands = [...new Set(products.map(p => p.Brand))];

        categories.forEach(cat => {
          const opt = document.createElement('option');
          opt.value = cat;
          opt.textContent = cat;
          categorySelect.appendChild(opt);
        });

        brands.forEach(brand => {
          const opt = document.createElement('option');
          opt.value = brand;
          opt.textContent = brand;
          brandSelect.appendChild(opt);
        });

        function applyFilters() {
          const category = categorySelect.value;
          const brand = brandSelect.value;
          const search = searchInput.value.toLowerCase();
          const sort = sortSelect.value;

          let filtered = products.filter(p => {
            return (
              (!category || p.Category === category) &&
              (!brand || p.Brand === brand) &&
              (!search || p['Product Name'].toLowerCase().includes(search))
            );
          });

          if (sort === 'asc') {
            filtered.sort((a, b) => parseFloat(a.Price) - parseFloat(b.Price));
          } else if (sort === 'desc') {
            filtered.sort((a, b) => parseFloat(b.Price) - parseFloat(a.Price));
          }

          renderProducts(filtered);
        }

        [categorySelect, brandSelect, searchInput, sortSelect].forEach(el => {
          el.addEventListener('input', applyFilters);
        });
      }

      fetchProducts().then(products => {
        renderProducts(products);
        setupFilters(products);
      });
    </script>
  </body>
</html>
