<!-- v1.3: Product detail routing fix using slugs -->

<!-- Shared product data (static JSON for now) -->
<script type="module">
  import products from './data/products.js'; // Will include parsed CSV data

  const slugify = str => str.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/(^-|-$)/g, '');

  const pathParts = window.location.pathname.split('/');
  const slug = pathParts[pathParts.length - 1];

  const product = products.find(p => slugify(p.Name) === slug);

  const productContainer = document.getElementById('product-detail');

  if (product) {
    productContainer.innerHTML = `
      <h1>${product.Name}</h1>
      <img src="${product.Image}" alt="${product.Name}" style="width: 300px;">
      <p><strong>Price:</strong> ${product.Price}</p>
      <p><strong>Category:</strong> ${product.Category}</p>
      <p><a href="${product.Link}" target="_blank">View on Brand Site</a></p>
    `;
  } else {
    productContainer.innerHTML = '<p>Product not found.</p>';
  }
</script>

<!-- HTML element to mount product -->
<div id="product-detail"></div>
